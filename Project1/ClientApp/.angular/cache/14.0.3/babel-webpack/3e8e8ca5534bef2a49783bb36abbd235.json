{"ast":null,"code":"import { GoogleMap } from '@angular/google-maps'; //import { MapTrackService } from '../../../shared/services/map.track.service'\n\nimport { map, Observable } from 'rxjs';\nimport { StylesMap } from './map.style';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/google-maps\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"mapSearch\"];\nconst _c1 = [\"mapSearch2\"];\n\nfunction MapTrackComponent_map_marker_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"map-marker\", 10);\n  }\n\n  if (rf & 2) {\n    const marker_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"options\", marker_r4);\n  }\n}\n\nfunction MapTrackComponent_map_directions_renderer_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"map-directions-renderer\", 11);\n  }\n\n  if (rf & 2) {\n    const directionsResults_r5 = ctx.ngIf;\n    i0.ɵɵproperty(\"directions\", directionsResults_r5);\n  }\n}\n\nexport class MapTrackComponent {\n  constructor(mapDirectionsService) {\n    this.mapDirectionsService = mapDirectionsService;\n    this.searchField = null;\n    this.searchField2 = null;\n    this.map = null;\n    this.style = {\n      pointerEvents: \"none\",\n      opacity: \"0\"\n    };\n    this.show = false;\n    this.cordinateOrigin = null;\n    this.cordinateDestination = null;\n    this.options = {\n      disableDefaultUI: true,\n      styles: StylesMap.dark\n    };\n    this.center = {\n      lat: 48.8588548,\n      lng: 2.347035\n    };\n    this.zoom = 8;\n    this.markers = [{\n      position: {\n        lat: 48.8584,\n        lng: 2.2945\n      },\n      animation: google.maps.Animation.DROP,\n      label: \"123\"\n    } // { lat: 48.8584, lng: 2.2945 }, // Eiffel Tower\n    //{ lat: 48.8606, lng: 2.3376 }, // Louvre Museum\n    // { lat: 48.8530, lng: 2.3499 }, // Cathédrale Notre-Dame de Paris\n    ];\n    this.directionsResults$ = new Observable();\n  }\n\n  buildRoute() {\n    if (this.cordinateOrigin != null && this.cordinateDestination != null) {\n      const request = {\n        origin: this.cordinateOrigin.getCenter(),\n        destination: this.cordinateDestination.getCenter(),\n        travelMode: google.maps.TravelMode.DRIVING\n      };\n      this.directionsResults$ = this.mapDirectionsService.route(request).pipe(map(response => response.result));\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.searchField != null && this.searchField2 != null) {\n      let change1 = this.InitSearchInput(this.searchField);\n      let change2 = this.InitSearchInput(this.searchField2);\n      change1.subscribe(value => {\n        this.cordinateOrigin = value;\n        this.buildRoute();\n      });\n      change2.subscribe(value => {\n        this.cordinateDestination = value;\n        this.buildRoute();\n      });\n    }\n  }\n\n  InitSearchInput(el) {\n    let informator = new Observable(oserv => {\n      const SearchBox = new google.maps.places.SearchBox(el.nativeElement);\n      SearchBox.addListener('places_changed', () => {\n        const places = SearchBox.getPlaces();\n\n        if ((places === null || places === void 0 ? void 0 : places.length) === 0) {\n          return;\n        }\n\n        const bounds = new google.maps.LatLngBounds();\n        places === null || places === void 0 ? void 0 : places.forEach(place => {\n          if (!place.geometry || !place.geometry.location) {\n            return;\n          }\n\n          if (place.geometry.viewport) {\n            bounds.union(place.geometry.viewport);\n          } else {\n            bounds.extend(place.geometry.location);\n          }\n        });\n        oserv.next(bounds);\n      });\n    });\n    return informator;\n  }\n\n  MenuShow() {\n    this.show = !this.show;\n    let clone = Object.assign({}, this.style);\n\n    if (this.show) {\n      clone.opacity = \"0.9\";\n      clone.pointerEvents = \"auto\";\n    } else {\n      clone.opacity = \"0\";\n      clone.pointerEvents = \"none\";\n    }\n\n    this.style = clone;\n  }\n\n  Set() {\n    let marker = {\n      title: \"321\",\n      position: {\n        lat: 48.9584,\n        lng: 2.3945\n      },\n      animation: google.maps.Animation.BOUNCE,\n      collisionBehavior: \"2s\",\n      cursor: \"crosshair\",\n      opacity: 0.5,\n      label: {\n        text: \"123\",\n        color: \"#fff\",\n        fontWeight: \"900\",\n        fontSize: \"40px\"\n      }\n    };\n    this.markers.push(marker); //let clone = { ...(this.center)};\n    //clone.lat += 1;\n    //this.center = clone;\n  }\n\n}\n\nMapTrackComponent.ɵfac = function MapTrackComponent_Factory(t) {\n  return new (t || MapTrackComponent)(i0.ɵɵdirectiveInject(i1.MapDirectionsService));\n};\n\nMapTrackComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MapTrackComponent,\n  selectors: [[\"app-map-track\"]],\n  viewQuery: function MapTrackComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(GoogleMap, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchField = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchField2 = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.map = _t.first);\n    }\n  },\n  decls: 16,\n  vars: 9,\n  consts: [[1, \"simple-container\"], [1, \"map\"], [\"v-bind:class\", \"{hide:edit}\", 1, \"menu-bottom\"], [3, \"click\"], [1, \"menu\"], [\"mapSearch\", \"\"], [\"mapSearch2\", \"\"], [\"height\", \"100vh\", \"width\", \"100%\", 3, \"options\", \"center\", \"zoom\"], [3, \"options\", 4, \"ngFor\", \"ngForOf\"], [3, \"directions\", 4, \"ngIf\"], [3, \"options\"], [3, \"directions\"]],\n  template: function MapTrackComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function MapTrackComponent_Template_button_click_3_listener() {\n        return ctx.MenuShow();\n      });\n      i0.ɵɵtext(4, \"\\u041F\\u0440\\u043E\\u043A\\u043B\\u0430\\u0441\\u0442\\u0438 \\u043C\\u0430\\u0440\\u0448\\u0440\\u0443\\u0442\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 4);\n      i0.ɵɵelement(6, \"input\", null, 5)(8, \"input\", null, 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"google-map\", 7);\n      i0.ɵɵtemplate(11, MapTrackComponent_map_marker_11_Template, 1, 1, \"map-marker\", 8);\n      i0.ɵɵtemplate(12, MapTrackComponent_map_directions_renderer_12_Template, 1, 1, \"map-directions-renderer\", 9);\n      i0.ɵɵpipe(13, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function MapTrackComponent_Template_button_click_14_listener() {\n        return ctx.Set();\n      });\n      i0.ɵɵtext(15, \"Coordinate change\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleMap(ctx.style);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"options\", ctx.options)(\"center\", ctx.center)(\"zoom\", ctx.zoom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.markers);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(13, 7, ctx.directionsResults$));\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i1.GoogleMap, i1.MapDirectionsRenderer, i1.MapMarker, i2.AsyncPipe],\n  styles: [\".map[_ngcontent-%COMP%]{\\r\\n    width: 100%;\\r\\n    margin-bottom: 80px;\\r\\n    position: relative;\\r\\n    border-left: 3px solid var(--orange);\\r\\n    border-right: 3px solid var(--orange);\\r\\n    box-sizing: border-box;\\r\\n}\\r\\nsvg.map-view-all[_ngcontent-%COMP%] {\\r\\n  top: 50%;\\r\\n  left: -3px;\\r\\n}\\r\\nsvg.map-view-from[_ngcontent-%COMP%] {\\r\\n  top: 25%;\\r\\n  right: -5px;\\r\\n}\\r\\nsvg.map-view-delivery[_ngcontent-%COMP%] {\\r\\n  top: 50%;\\r\\n  right: -5px;\\r\\n}\\r\\nsvg.map-view-to[_ngcontent-%COMP%] {\\r\\n  top: 75%;\\r\\n  right: -5px;\\r\\n}\\r\\nsvg[_ngcontent-%COMP%] {\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n  transform: translateY(-50%);\\r\\n  width: 50px;\\r\\n  stroke: var(--orange);\\r\\n  transition: 0.2s;\\r\\n  z-index: 100;\\r\\n}\\r\\nsvg[_ngcontent-%COMP%]:hover {\\r\\n      width: 60px;\\r\\n    }\\r\\nsvg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\\r\\n    fill: #f5f5f5;\\r\\n  }\\r\\nsvg[_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%] {\\r\\n      fill: var(--orange-white);\\r\\n    }\\r\\n.menu[_ngcontent-%COMP%] {\\r\\n  width: 60vw;\\r\\n  height: 60vh;\\r\\n  position: fixed;\\r\\n  background: #fff;\\r\\n  border: 1px solid #ccc;\\r\\n  top: 20vh;\\r\\n  left: 20vw;\\r\\n  z-index: 10;\\r\\n  pointer-events: none;\\r\\n  opacity: 0;\\r\\n  transition: 0.3s;\\r\\n  border-radius: 15px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC10cmFjay5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIsb0NBQW9DO0lBQ3BDLHFDQUFxQztJQUNyQyxzQkFBc0I7QUFDMUI7QUFDQTtFQUNFLFFBQVE7RUFDUixVQUFVO0FBQ1o7QUFFQTtFQUNFLFFBQVE7RUFDUixXQUFXO0FBQ2I7QUFDQTtFQUNFLFFBQVE7RUFDUixXQUFXO0FBQ2I7QUFDQTtFQUNFLFFBQVE7RUFDUixXQUFXO0FBQ2I7QUFFQTtFQUNFLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsMkJBQTJCO0VBQzNCLFdBQVc7RUFDWCxxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLFlBQVk7QUFDZDtBQUNJO01BQ0UsV0FBVztJQUNiO0FBQ0Y7SUFDRSxhQUFhO0VBQ2Y7QUFDRTtNQUNFLHlCQUF5QjtJQUMzQjtBQUNKO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLHNCQUFzQjtFQUN0QixTQUFTO0VBQ1QsVUFBVTtFQUNWLFdBQVc7RUFDWCxvQkFBb0I7RUFDcEIsVUFBVTtFQUNWLGdCQUFnQjtFQUNoQixtQkFBbUI7QUFDckIiLCJmaWxlIjoibWFwLXRyYWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFwe1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA4MHB4O1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1vcmFuZ2UpO1xyXG4gICAgYm9yZGVyLXJpZ2h0OiAzcHggc29saWQgdmFyKC0tb3JhbmdlKTtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuc3ZnLm1hcC12aWV3LWFsbCB7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogLTNweDtcclxufVxyXG5cclxuc3ZnLm1hcC12aWV3LWZyb20ge1xyXG4gIHRvcDogMjUlO1xyXG4gIHJpZ2h0OiAtNXB4O1xyXG59XHJcbnN2Zy5tYXAtdmlldy1kZWxpdmVyeSB7XHJcbiAgdG9wOiA1MCU7XHJcbiAgcmlnaHQ6IC01cHg7XHJcbn1cclxuc3ZnLm1hcC12aWV3LXRvIHtcclxuICB0b3A6IDc1JTtcclxuICByaWdodDogLTVweDtcclxufVxyXG5cclxuc3ZnIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICB3aWR0aDogNTBweDtcclxuICBzdHJva2U6IHZhcigtLW9yYW5nZSk7XHJcbiAgdHJhbnNpdGlvbjogMC4ycztcclxuICB6LWluZGV4OiAxMDA7XHJcbn1cclxuICAgIHN2Zzpob3ZlciB7XHJcbiAgICAgIHdpZHRoOiA2MHB4O1xyXG4gICAgfVxyXG4gIHN2ZyBwYXRoIHtcclxuICAgIGZpbGw6ICNmNWY1ZjU7XHJcbiAgfVxyXG4gICAgc3ZnOmhvdmVyIHBhdGgge1xyXG4gICAgICBmaWxsOiB2YXIoLS1vcmFuZ2Utd2hpdGUpO1xyXG4gICAgfVxyXG4ubWVudSB7XHJcbiAgd2lkdGg6IDYwdnc7XHJcbiAgaGVpZ2h0OiA2MHZoO1xyXG4gIHBvc2l0aW9uOiBmaXhlZDtcclxuICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgdG9wOiAyMHZoO1xyXG4gIGxlZnQ6IDIwdnc7XHJcbiAgei1pbmRleDogMTA7XHJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgb3BhY2l0eTogMDtcclxuICB0cmFuc2l0aW9uOiAwLjNzO1xyXG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbn1cclxuIl19 */\"]\n});","map":{"version":3,"mappings":"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","names":["GoogleMap","map","Observable","StylesMap","i0","MapTrackComponent","constructor","mapDirectionsService","pointerEvents","opacity","disableDefaultUI","styles","dark","lat","lng","position","animation","google","maps","Animation","DROP","label","directionsResults$","buildRoute","cordinateOrigin","cordinateDestination","request","origin","getCenter","destination","travelMode","TravelMode","DRIVING","route","pipe","response","result","ngAfterViewInit","searchField","searchField2","change1","InitSearchInput","change2","subscribe","value","el","informator","oserv","SearchBox","places","nativeElement","addListener","getPlaces","length","bounds","LatLngBounds","forEach","place","geometry","location","viewport","union","extend","next","MenuShow","show","clone","style","Set","marker","title","BOUNCE","collisionBehavior","cursor","text","color","fontWeight","fontSize","markers","push","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["D:\\PROJECTS\\Angular\\Project1\\Project1\\ClientApp\\src\\app\\map-track\\map-track.component.ts","D:\\PROJECTS\\Angular\\Project1\\Project1\\ClientApp\\src\\app\\map-track\\map-track.component.html"],"sourcesContent":["import { AfterViewInit, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { MapInfoWindow, MapMarker, MapDirectionsService, GoogleMap } from '@angular/google-maps';\r\n//import { MapTrackService } from '../../../shared/services/map.track.service'\r\nimport { map, Observable } from 'rxjs';\r\nimport { StylesMap } from './map.style';\r\n\r\n\r\n@Component({\r\n  selector: 'app-map-track',\r\n  templateUrl: './map-track.component.html',\r\n  styleUrls: ['./map-track.component.css']\r\n})\r\n\r\nexport class MapTrackComponent implements AfterViewInit {\r\n\r\n  @ViewChild(\"mapSearch\") searchField: ElementRef | null = null;\r\n  @ViewChild(\"mapSearch2\") searchField2: ElementRef | null = null;\r\n  @ViewChild(GoogleMap) map: GoogleMap | null = null;\r\n  style = {\r\n    pointerEvents: \"none\",\r\n    opacity: \"0\",\r\n  }\r\n  show = false;\r\n  cordinateOrigin: google.maps.LatLngBounds | null =null;\r\n  cordinateDestination: google.maps.LatLngBounds | null = null;\r\n\r\n  options: google.maps.MapOptions = {\r\n    disableDefaultUI: true,\r\n    styles: StylesMap.dark,\r\n  };\r\n\r\n  center: google.maps.LatLngLiteral = { lat: 48.8588548, lng: 2.347035 };\r\n  zoom = 8;\r\n\r\n  markers: google.maps.MarkerOptions[] = [\r\n    {\r\n      position: { lat: 48.8584, lng: 2.2945 },\r\n      animation: google.maps.Animation.DROP,\r\n      label: \"123\",\r\n\r\n    },\r\n    // { lat: 48.8584, lng: 2.2945 }, // Eiffel Tower\r\n    //{ lat: 48.8606, lng: 2.3376 }, // Louvre Museum\r\n    // { lat: 48.8530, lng: 2.3499 }, // Cathédrale Notre-Dame de Paris\r\n  ];\r\n\r\n\r\n  directionsResults$: Observable<google.maps.DirectionsResult | undefined>;\r\n  constructor(private mapDirectionsService: MapDirectionsService) {\r\n    this.directionsResults$ = new Observable();\r\n  }\r\n\r\n  buildRoute() {\r\n    if (this.cordinateOrigin != null && this.cordinateDestination != null) {\r\n      const request: google.maps.DirectionsRequest = {\r\n        origin: this.cordinateOrigin.getCenter(),\r\n        destination: this.cordinateDestination.getCenter(),\r\n        travelMode: google.maps.TravelMode.DRIVING\r\n      };\r\n      this.directionsResults$ = this.mapDirectionsService.route(request).pipe(map(response => response.result));\r\n    }\r\n  }\r\n\r\n\r\n  ngAfterViewInit(): void {\r\n    if (this.searchField != null && this.searchField2 != null) {\r\n      let change1 = this.InitSearchInput(this.searchField);\r\n      let change2 = this.InitSearchInput(this.searchField2);\r\n\r\n      change1.subscribe(value => {\r\n        this.cordinateOrigin = value;\r\n        this.buildRoute();\r\n      })\r\n      change2.subscribe(value => {\r\n        this.cordinateDestination = value;\r\n        this.buildRoute();\r\n      })\r\n    }\r\n  }\r\n\r\n  InitSearchInput(el: ElementRef) {\r\n    let informator = new Observable<google.maps.LatLngBounds>(oserv => {\r\n      const SearchBox = new google.maps.places.SearchBox(\r\n        el.nativeElement,\r\n      );\r\n\r\n      SearchBox.addListener('places_changed', () => {\r\n        const places = SearchBox.getPlaces();\r\n\r\n        if (places?.length === 0) {\r\n          return\r\n        }\r\n        const bounds = new google.maps.LatLngBounds();\r\n        places?.forEach(place => {\r\n          if (!place.geometry || !place.geometry.location) {\r\n            return;\r\n          }\r\n          if (place.geometry.viewport) {\r\n            bounds.union(place.geometry.viewport);\r\n          }\r\n          else {\r\n            bounds.extend(place.geometry.location);\r\n          }\r\n        });\r\n        oserv.next(bounds)\r\n      })\r\n    });\r\n    return informator;\r\n  }\r\n\r\n  MenuShow() {\r\n    this.show = !this.show;\r\n    let clone = { ...(this.style) };\r\n    if (this.show) {\r\n      clone.opacity = \"0.9\";\r\n      clone.pointerEvents = \"auto\";\r\n    }\r\n    else {\r\n      clone.opacity = \"0\";\r\n      clone.pointerEvents = \"none\";\r\n    }\r\n    this.style = clone;\r\n  }\r\n\r\n\r\n  Set(): void {\r\n\r\n    let marker: google.maps.MarkerOptions =\r\n    {\r\n      title: \"321\",\r\n      position: { lat: 48.9584, lng: 2.3945 },\r\n      animation: google.maps.Animation.BOUNCE,\r\n      collisionBehavior: \"2s\",\r\n      cursor: \"crosshair\",\r\n      opacity: 0.5,\r\n      label: {\r\n        text: \"123\",\r\n        color: \"#fff\",\r\n        fontWeight: \"900\",\r\n        fontSize: \"40px\"\r\n      },\r\n\r\n    }\r\n\r\n    this.markers.push(marker);\r\n\r\n    //let clone = { ...(this.center)};\r\n    //clone.lat += 1;\r\n    //this.center = clone;\r\n  };\r\n}\r\n","<div class=\"simple-container\">\r\n  <div class=\"map\">\r\n\r\n    <div class=\"menu-bottom\" v-bind:class=\"{hide:edit}\">\r\n      <button (click) = \"MenuShow()\">Прокласти маршрут</button>\r\n    </div>\r\n\r\n    <div [style]=\"style\" class=\"menu\">\r\n      <input #mapSearch />\r\n      <input #mapSearch2 />\r\n    </div>\r\n\r\n    <google-map height=\"100vh\"\r\n                width=\"100%\"\r\n                [options]=\"options\"\r\n                [center]=\"center\"\r\n                [zoom]=\"zoom\">\r\n      <map-marker *ngFor=\"let marker of markers\"\r\n                  [options]=\"marker\"></map-marker>\r\n      <map-directions-renderer *ngIf=\"(directionsResults$ | async) as directionsResults\"\r\n                               [directions]=\"directionsResults\"></map-directions-renderer>\r\n\r\n    </google-map>\r\n    <button (click)=\"Set()\">Coordinate change</button>\r\n  </div>\r\n</div>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}